{% extends 'JJDLP/dummy_base.html' %}

{% block title %}Advanced Search{% endblock %}

{% block body %}
    <div class="search_docs" style="margin-right:1em;"><b>Hint:</b> To gain better results, read about how the engine has been set up in the <a href="{% url 'search_docs' %}" style="text-decoration: underline;"> search docs</a>.</div>

    <h1>Advanced search</h1>
    <div id="specified_info">
        <form method="get" action=".">
            <table id="advanced_search">
                {{ form.as_table }}
                <tr>
                    <td>&nbsp;</td>
                    <td>
                        <input type="submit" value="Search">
                    </td>
                </tr>
            </table>

            {% if query %}
                {% include 'search/includes/top_paginator.html' %}
                <div class="panel panel-default">
                <div class="panel-body">
                    <table class="result_list">
        				<tbody>
        					{% for result in page.object_list %}

                        {% with result.object.notepage as notepagenumber %}
                        {% with result.object.slug as sourceslug %}
                        {% with result.object.page_number as manuscriptpagenumber %}
                        {% with result.object.linenumber as line %}

                            {% if notepagenumber %}
                                {% include 'notebooks/includes/notebooks_searchresults.html' %}
                            
                            {% elif manuscriptpagenumber %}
                                {% include 'manuscripts/includes/manuscripts_searchresults.html' %}

                            {% elif sourceslug %}
                                {% include 'library/includes/library_searchresults.html' %}

                            {% elif line %}
                                {% include 'novels/includes/novels_searchresults.html' %}

                            {% endif %}

                        {% endwith %}
                        {% endwith %}
                        {% endwith %}
                        {% endwith %}

        					{% endfor %}
        				</tbody>
        			</table>

                    {% include 'search/includes/bottom_paginator.html' %}
                </div>
                </div>
                
            {% else %}
                <div class="fail">
                Please enter a search query.</div>
            {% endif %}
        </form>
    </div>
{% endblock %}