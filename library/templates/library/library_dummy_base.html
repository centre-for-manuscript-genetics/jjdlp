{% extends 'JJDLP/dummy_base.html' %}
{% load resolve_hits %}
{% load activeurl %}

{% block heads %}
<script src="{{ STATIC_URL }}JJDLP/js/jquery-1.11.2.js"></script>
<script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
<link rel="stylesheet" href="//code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
<script type="text/javascript" src="{{ STATIC_URL }}library/js/unfold.js"></script>
{% endblock %}

{% block title %}Library - James Joyce Database{% endblock %}

{% block body %}
<div id="toolbar">
	<div class="url_navigator">
		{% include 'library/includes/breadcrumb.html' %}
	</div>

	{% block search %}

		<div class="s">
			<form action="{% url 'library_fast_search' %}" method="get">
					<input class="form-control" id="searchquery" type="text" name='q' placeholder="Search library...">
					<input type="hidden" name="models" value="library.source" /> 
			</form>
		</div>

		<button type="button" class="btn btn-default sort_fields" data-toggle="modal" data-target="#sortfieldsmodal">
			{% if source_field and first_letter %}
					<span height="16" width="16" class="glyphicon glyphicon-sort-by-alphabet"></span>
					<strong>{{ source_field|title }}, {{ first_letter }} ({{ page.paginator.count }})</strong>
			{% else %}
					<span height="16" width="16" class="glyphicon glyphicon-sort-by-alphabet"></span>
					No filter
			{% endif %}
		</button>
		<div class="modal fade" id="sortfieldsmodal" tabindex="-1" role="dialog">
			<div class="modal-dialog" role="document">
			    <div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
						<h4 class="modal-title" id="myModalLabel">Edit sort filter</h4>
					</div>
					<div class="modal-body">
						<div class="sorter">
							<div class="row">
								<button class="btn btn-default">{% block order_author_letter %}<a href="{% url 'order_all' source_field='author' first_letter='A' %}">{% endblock %}Author</a></button>
								<button class="btn btn-default">{% block order_title_letter %}<a href="{% url 'order_all' source_field='title' first_letter='A' %}">{% endblock %}Title</a></button>
								<!-- publisher is not included, only city! -->
								<button class="btn btn-default">{% block order_city_letter %}<a href="{% url 'order_all' source_field='city' first_letter='A' %}">{% endblock %}City</a></button>
								<!-- Date does not work yet! -->
								<button class="btn btn-default">Date</button>
							</div>
							<div class="row">
								{% for letter in 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' %}
								<button class="btn btn-default">{% block order_field_field %}<a href="{% url 'order_all' source_field='author' first_letter=letter %}">{% endblock %}({{ letter }}: <span id="hits">{% block order_field2_field %}{% resolve_hits source_field='author' first_letter=letter %}{% endblock %})</span></a></button>
								{% endfor %}
							</div>
						</div>
					</div>
			    </div>
			</div>
		</div>

		{% block right_floater_info %}
		{% endblock %}

	{% endblock %}
</div>

<section id="content">
	{% block content %}
	<div class="text">
	<div id="Info">
		<p>Oops, you have found a hidden page! This is rather problematic, so please contact the developers.</p>
	</div>
	</div>
	{% endblock %}
</section>
{% endblock %}