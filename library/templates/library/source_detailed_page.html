{% extends 'library/source_detail.html' %}
{% load thumbnail %}

{% block heads %}
<script src="{{ STATIC_URL }}library/js/scrollsneak.js"></script>
{% endblock %}

{% block search %}
{% endblock %}

{% block source_pages %}
{% endblock %}

{% block source_info_cover %}
	<table id="source_info_cover" style="float:left;">
		<tr>
			<td>
			{% if frontcover %}
				{% thumbnail frontcover "67x100" crop="98% 0%" as thum %}
				<a href="{% url 'source_detail' slug=object.slug %}">
				<img src="{{ thum.url }}" width="{{ thum.width }}" height="{{ thum.height }}" style="border:1px solid black;">
				</a>
				{% endthumbnail %}
			{% else %}
				<a href="{% url 'source_detail' slug=object.slug %}">
				<img id="thumbnail" src="{{ MEDIA_URL }}JJDLP/images/torn_paper_thumb.jpg" width="70" height="100">
				</a>
			{% endif %}
			</td>
		</tr>
	</table>
{% endblock %}

{% block extra_sourceinfo %}
<tr>
	<td>
		<a href="{% url 'page_detail' slug=object.slug req_page=chosen_page.actual_pagenumber %}">Page {{ chosen_page.actual_pagenumber }}</a>
	</td>
</tr>
{% endblock %}

{% block page_gallery %}
</div></div></div>
<div class="gallery-wrap">
	<table class="table_page_gallery">
		<tr>
			<td>
				<figure>
				{% if chosen_page.image|is_portrait %}
					{% thumbnail chosen_page.image "x700" as im %}
						<img id="source_page" alt="" src="{{ im.url }}" width="{{ im.width }}" height="{{ im.height }}">
					{% endthumbnail %}
				{% else %}
					{% thumbnail chosen_page.image "900" as im %}
						<img id="source_page" alt="" src="{{ im.url }}" width="{{ im.width }}" height="{{ im.height }}">
					{% endthumbnail %}
				{% endif %}
				<figcaption>
				<ul id="tabs">
				{% if previous_pages %}
					{% for previous_page in previous_pages %}
						<li class="paginator_thum">
						{% thumbnail previous_page.image "x100" as previous_thum %}
							<a href="{% url 'page_detail' slug=object.slug req_page=previous_page.actual_pagenumber %}" class="hovertext" title="{{ previous_page.actual_pagenumber }}" style="font-size:85%;">
								<img src="{{ previous_thum.url }}" width="{{ previous_thum.width }}" height="{{ previous_thum.height }}">
							</a>
						{% endthumbnail %}
						</li>
					{% endfor %}
				{% endif %}
						<li class="actual_image">
						{% thumbnail chosen_page.image "x100" as actual_thum %}
							<img id="actual" class="hovertext" src="{{ actual_thum.url }}" width="{{ actual_thum.url }}" height="{{ actual_thum.height }}">
						{% endthumbnail %}
						</li>
				{% if next_pages %}
					{% for next_page in next_pages %}
						<li class="paginator_thum">
						{% thumbnail next_page.image "x100" as next_thum %}
							<a href="{% url 'page_detail' slug=object.slug req_page=next_page.actual_pagenumber %}" class="hovertext" title="{{ next_page.actual_pagenumber }}" style="font-size:85%;">
								<img src="{{ next_thum.url }}" width="{{ next_thum.width }}" height="{{ next_thum.height }}">
							</a>
						{% endthumbnail %}
						</li>
					{% endfor %}
				{% endif %}
				</ul>
				</figcaption>
				</figure>
			</td>
		</tr>
	</table>
</div>
<script>
(function() {
    var sneaky = new ScrollSneak(location.hostname), tabs = document.getElementById('tabs').getElementsByTagName('li'), i = 0, len = tabs.length;
    for (; i < len; i++) {
        tabs[i].onclick = sneaky.sneak;
    }
})();
</script>

{% endblock %}


{% block detailed_content %}

{% endblock %}
