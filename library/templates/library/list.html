{% extends 'generic/desk.html' %}

{% block title_display %}
<h4 class="media-heading">
	<a class="notred" href="{% url 'library_item' slug=item.slug %}">
		{{ item.title }}
	</a>
</h4>
<table id="item_info">
	<tr>
		{% if item.get_authors %}<td><span class="glyphicon glyphicon-option-vertical"></span></td><td>{{ item.get_authors }}</td>{% endif %}
		{% if item.date %}<td><span class="glyphicon glyphicon-option-vertical"></td><td>{{ item.date }}</td>{% endif %}
		{% if item.publisher %}<td><span class="glyphicon glyphicon-option-vertical"></span></td><td>{{ item.publisher }}</td>{% endif %}
	</tr>
	<tr class="blank_row"></tr>
	{% if item.collection %}<tr><td><span class="glyphicon glyphicon-tasks"></td><td><a href="{% url 'library_collection' slug=item.collection.slug %}">{{ item.collection }}</a></td></tr>{% endif %}
	<tr><td><span class="glyphicon glyphicon-list-alt"></td><td colspan="5">There are <strong>{{ detail_count }} reading traces</strong> identified with relation to Joyce's notes. The desk shows <strong>trace {{ page_obj.start_index }} to {{ page_obj.end_index }}</strong>.</td></tr>
</table>
{% endblock %}

{% block desk_content %}
	{% include 'generic/includes/nums_paginator.html' %}

	{% if excerpts %}
		{% for excerpt in excerpts %}
			<div class="panel panel-default">
				<div class="arrow"></div>
				<div class="panel-heading">
					<a href="{% url 'library_page' itemslug=item.slug req_page=excerpt.page.actual_pagenumber %}">
						Page {{ excerpt.page.actual_pagenumber }}
					</a>
				</div>
				<div class="panel-body">
					{{ excerpt.content }}
				</div>	
				{% if excerpt.note_set %}
				<ul class="list-group">
		    		{% for note in excerpt.note_set.all %}
		    			<li class="list-group-item">
		    				<a class="notunderline" href="{% url 'notebooks_page' noteb=note.noteb notebpage=note.page %}">
		    					{{ note|safe }}
		    				</a>
		    			</li>
		    		{% endfor %}
		    	</ul>
		    	{% endif %}
    		</div>
    	{% endfor %}
	{% endif %}

	{% include 'generic/includes/nums_paginator.html' %}
{% endblock %}
