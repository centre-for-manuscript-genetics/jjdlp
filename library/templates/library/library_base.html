{% extends 'JJDLP/dummy_base.html' %}
{% load resolve_hits %}
{% load thumbnail %}

{% block heads %}
<script src="{{ STATIC_URL }}JJDLP/js/jquery-1.11.2.js"></script>
<script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
<link rel="stylesheet" href="//code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}library/css/library_homepage_css.css" />
<script type="text/javascript" src="{{ STATIC_URL }}library/js/appear_onclick.js"></script>
{% endblock %}

{% block title %}Library - James Joyce Database{% endblock %}

{% block body_title %}
<div id="toolbar">
	<div class="url_navigator">
		{% include 'library/includes/breadcrumb.html' %}
	</div>
</div>

<table id="head_banner">
	<tr>
		<section id="title">Library</section>
	</tr>
	<tr>
			<div id="info">
				<p>Joyce's extant and virtual library</p>
			</div>
	</tr>
	<tr>
		<div id="lib_pic">
			<img id="library_picture" src="{{ STATIC_URL }}JJDLP/images/half_lib.jpg">
		</div>
	</tr>
</table>
{% endblock %}

{% block body %}
<div id="lib_count"><strong>{{ source_amount }}</strong> items in the library database</div>

<div class="double-paneldisplay">
<div class="leftpanel">
	<div class="panel panel-default well" style="min-height: 170px;">
		<div class="panel-body">
			<h3 style="display:inline;padding-right: 40px;"><span class="glyphicon glyphicon-search"></span> Search</h3>
				<div id="search_box">
					<form action="{% url 'library_fast_search' %}" method="get">
						<input style="width: 120%;" class="form-control" id="searchquery" type="text" name='q' placeholder="Search library...">
						<input type="hidden" name="models" value="library.source" /> 
					</form>
				</div>

			<div class="timeline-wrap detail-timeline detailtimeline">
				Visit the <a href="{% url 'haystack_search' %}">advanced search</a> page for more thorough searches.
			</div>				
		</div>
	</div>
</div>
<div class="rightpanel" data-toggle="modal" data-target="#sortfieldsmodal">
	<div class="panel panel-default well" style="min-height: 170px;">
		<div class="panel-body">
			<h3 style="display: inline;"><span class="glyphicon glyphicon-sort-by-alphabet"></span> Sort</h3>
			<div class="timeline-wrap detail-timeline detailtimeline">
				Click to sort library items based on a field and first letter.
			</div>				
		</div>
	</div>
</div>
</div>

<div class="modal fade" id="sortfieldsmodal" tabindex="-1" role="dialog">
	<div class="modal-dialog" role="document">
	    <div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
				<h4 class="modal-title" id="myModalLabel">Edit sort filter</h4>
			</div>
			<div class="modal-body">
				<div class="sorter">
					<div class="row">
						<button class="btn btn-default">{% block order_author_letter %}<a href="{% url 'order_all' source_field='author' first_letter='A' %}">{% endblock %}Author</a></button>
						<button class="btn btn-default">{% block order_title_letter %}<a href="{% url 'order_all' source_field='title' first_letter='A' %}">{% endblock %}Title</a></button>
						<!-- publisher is not included, only city! -->
						<button class="btn btn-default">{% block order_city_letter %}<a href="{% url 'order_all' source_field='city' first_letter='A' %}">{% endblock %}City</a></button>
						<!-- Date does not work yet! -->
						<button class="btn btn-default">Date</button>
					</div>
					<div class="row">
						{% for letter in 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' %}
						<button class="btn btn-default">{% block order_field_field %}<a href="{% url 'order_all' source_field='author' first_letter=letter %}">{% endblock %}({{ letter }}: <span id="hits">{% block order_field2_field %}{% resolve_hits source_field='author' first_letter=letter %}{% endblock %})</span></a></button>
						{% endfor %}
					</div>
				</div>
			</div>
	    </div>
	</div>
</div>

<div class="panel panel-default">
	<div class="panel-body">
		<div class="media">
		  <div class="media-left">
		      <img class="media-object" src="..." alt="...">
		  </div>
		  <div class="media-body">
		    <h4 class="media-heading">The extant library</h4>

		  </div>
		</div>
		<div class="media">
		  <div class="media-left">
		  	{% thumbnail vl_example.image "100x150" crop="98% 0%" as vl_example %}
		      <img class="media-object" src="{{ vl_example.url }}" alt="" width="{{ vl_example.width }}" height="{{ vl_example.height }}">
		    {% endthumbnail %}
		  </div>
		  <div class="media-body">
		    <h4 class="media-heading">The virtual library</h4>
		    
		  </div>
		</div>
	</div>
</div>
</div>


{% endblock %}